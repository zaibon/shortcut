// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.857
package admin

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
)

func AnalyticsTab(data AdminDashboardData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div><!-- Analytics Overview --><div class=\"mb-8\"><h1 class=\"text-2xl font-semibold text-gray-900\">Service Analytics</h1><p class=\"mt-2 text-sm text-gray-700\">Comprehensive analytics and insights about your URL shortening service.</p></div><!-- Analytics Charts --><div class=\"grid grid-cols-1 gap-6 lg:grid-cols-2 mb-8\"><div class=\"bg-white shadow rounded-lg\"><div class=\"px-4 py-5 sm:px-6 border-b border-gray-200\"><h3 class=\"text-lg leading-6 font-medium text-gray-900\">Daily Active Users</h3></div><div class=\"px-4 py-5 sm:p-6\"><div class=\"h-80\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templ.JSONScript("dailyActiveUsersData", data.Analytics.DailyActiveUsers).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<canvas id=\"dailyActiveUsersChart\"></canvas></div></div></div><div class=\"bg-white shadow rounded-lg\"><div class=\"px-4 py-5 sm:px-6 border-b border-gray-200\"><h3 class=\"text-lg leading-6 font-medium text-gray-900\">Click Distribution</h3></div><div class=\"px-4 py-5 sm:p-6\"><div class=\"h-80\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templ.JSONScript("clickDistributionData", data.Analytics.ClickDistribution).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<canvas id=\"clickDistributionChart\"></canvas></div></div></div></div><!-- Performance Metrics --><div class=\"grid grid-cols-1 gap-6 lg:grid-cols-2 mb-8\"><div class=\"bg-white shadow rounded-lg\"><div class=\"px-4 py-5 sm:px-6 border-b border-gray-200\"><h3 class=\"text-lg leading-6 font-medium text-gray-900\">Top Performing URLs</h3></div><div class=\"px-4 py-5 sm:p-6\"><div class=\"space-y-4\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, url := range data.Analytics.TopURLs {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<div class=\"flex items-center justify-between\"><div class=\"flex-1 min-w-0\"><p class=\"text-sm font-medium text-gray-900 truncate\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var3 string
				templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(url.ShortURL)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `admin/analytics.templ`, Line: 51, Col: 78}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</p><p class=\"text-sm text-gray-500 truncate\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var4 string
				templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(url.LongURL)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `admin/analytics.templ`, Line: 52, Col: 65}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</p></div><div class=\"text-sm text-gray-900 font-medium\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var5 string
				templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", url.Clicks))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `admin/analytics.templ`, Line: 54, Col: 87}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, " clicks</div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "</div></div></div><div class=\"bg-white shadow rounded-lg\"><div class=\"px-4 py-5 sm:px-6 border-b border-gray-200\"><h3 class=\"text-lg leading-6 font-medium text-gray-900\">Geographic Distribution</h3></div><div class=\"px-4 py-5 sm:p-6\"><div class=\"space-y-4\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, geo := range data.Analytics.GeoDistribution {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "<div class=\"flex items-center justify-between\"><span class=\"text-sm text-gray-500\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var6 string
				templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(geo.Label)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `admin/analytics.templ`, Line: 68, Col: 56}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "</span><div class=\"flex items-center\"><span class=\"text-sm text-gray-900\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var7 string
				templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", geo.Value))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `admin/analytics.templ`, Line: 73, Col: 76}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "</span></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "</div></div></div></div></div><script>\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\t\t\tinitAnalyticsCharts();\n\t\t\t});\n\n\t\t\tfunction initAnalyticsCharts() {\n\t\t\t\t// Daily Active Users Chart\n\t\t\t\tconst {labels: dauLabels, data: dauData} = load2dData('dailyActiveUsersData');\n\t\t\t\tconst dauCtx = document.getElementById('dailyActiveUsersChart').getContext('2d');\n\t\t\t\t\n\t\t\t\t// Format dates if needed\n\t\t\t\tconst formattedDauLabels = dauLabels.map(label => {\n\t\t\t\t\tconst d = new Date(label);\n\t\t\t\t\treturn d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n\t\t\t\t});\n\n\t\t\t\tcreateLineChart(dauCtx, formattedDauLabels, [{\n\t\t\t\t\tlabel: 'Active Users',\n\t\t\t\t\tdata: dauData,\n\t\t\t\t\tbackgroundColor: 'rgba(16, 185, 129, 0.2)',\n\t\t\t\t\tborderColor: 'rgba(16, 185, 129, 1)',\n\t\t\t\t\tborderWidth: 2,\n\t\t\t\t\ttension: 0.3,\n\t\t\t\t\tfill: true\n\t\t\t\t}]);\n\n\t\t\t\t// Click Distribution Chart\n\t\t\t\tconst {labels: cdLabels, data: cdData} = load2dData('clickDistributionData');\n\t\t\t\tconst cdCtx = document.getElementById('clickDistributionChart').getContext('2d');\n\t\t\t\t\n\t\t\t\tcreateDoughnutChart(cdCtx, cdLabels, [{\n\t\t\t\t\tdata: cdData,\n\t\t\t\t\tbackgroundColor: [\n\t\t\t\t\t\t'rgba(99, 102, 241, 0.8)',\n\t\t\t\t\t\t'rgba(139, 92, 246, 0.8)',\n\t\t\t\t\t\t'rgba(59, 130, 246, 0.8)',\n\t\t\t\t\t\t'rgba(16, 185, 129, 0.8)',\n\t\t\t\t\t\t'rgba(245, 158, 11, 0.8)'\n\t\t\t\t\t],\n\t\t\t\t\tborderWidth: 1\n\t\t\t\t}]);\n\t\t\t}\n\t\t</script>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = AdminLayout(data).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
